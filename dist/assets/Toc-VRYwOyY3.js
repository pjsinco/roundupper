import{W as A,c as z}from"./useButtonFunctions-uIm-YHA6.js";import{o as p,b as E,w as g,T as I,d as e,_ as C,c as u,g as h,D as v,a as x,H as W,F as j,e as w,h as m,i as T,v as k,y as f,k as a,m as D,l as G,z as F}from"./index-0Iosooy_.js";import{u as R}from"./renderer-newsletter-pe51VF_h.js";import{e as U}from"./useEditorFromTextArea-Vu5XOOF9.js";import{m as _}from"./marked.esm-KKTQJ6Gi.js";import"./styles-base-aoa-general-5iRRJacY.js";import"./markdown-dpzZz7rj.js";const J=e("div",{class:"loading-spinner"},null,-1);function P(r,o,c,t,s,d){return p(),E(I,{name:"fade",mode:"out-in"},{default:g(()=>[J]),_:1})}const q={name:"loading-spinner",props:{active:Boolean},computed:{},watch:{active(r){this.isActive=r}},data(){return{isActive:this.active}}},K=C(q,[["render",P]]),Q={class:"row"},X={class:"col-xs-12"},Y={class:"component__title",style:{display:"flex","justify-content":"space-between","align-items":"baseline"}},Z={class:"small",style:{"margin-left":"8px","font-size":"20px","font-weight":"300"}},$={style:{position:"relative",top:"2px"}},ee={key:0,class:"row"},te={class:"col-xs-12"},oe={class:"form-group"},ne=e("label",{for:"urlToFetch"},"Browser version URL",-1),se={class:"form-group clearfix"},le={key:1,class:"row"},ae={class:"col-xs-12"},re={class:"text-danger bg-danger",style:{padding:"10px"}},ie={class:"row"},ce={class:"col-xs-12"},de={class:"form-group"},pe=e("label",{for:"input"},"Table of contents (in Markdown)",-1),ue={key:2,class:"row"},he={class:"col-xs-12"},me={class:"form-group clearfix",style:{"margin-top":"40px"}},be=e("span",{class:"glyphicon glyphicon-refresh"},null,-1),fe={class:"btn-group pull-right"},_e=e("span",{class:"glyphicon glyphicon-copy"},null,-1),ge={style:{"max-width":"600px",margin:"0 auto",padding:"24px 0","background-color":"#fff",border:"1px dotted #d0d0d0"}},ye={id:"rendered"},ve=e("table",{bgcolor:"#FFFFFF",cellpadding:"0",cellspacing:"0",style:{border:"none","border-bottom":"none","border-collapse":"collapse","border-left":"none","border-right":"none","border-top":"none","mso-table-lspace":"0pt","mso-table-rspace":"0pt"},width:"100%"},[e("tbody",null,[e("tr",null,[e("td",{align:"left",style:{padding:"0 36px 0 36px"}},[e("table",{bgcolor:"#FFFFFF",cellpadding:"0",cellspacing:"0",style:{border:"none","border-bottom":"none","border-collapse":"collapse","border-left":"none","border-right":"none","border-top":"none","mso-table-lspace":"0pt","mso-table-rspace":"0pt"},width:"100%"},[e("tbody",null,[e("tr",null,[e("td",{align:"left",style:{padding:"24px 0px 24px 0px"}},[e("table",{border:"0",cellpadding:"0",cellspacing:"0",style:{border:"none","border-collapse":"collapse","mso-table-lspace":"0pt","mso-table-rspace":"0pt"},width:"100%"},[e("tbody",null,[e("tr",null,[e("td",null,[e("table",{cellpadding:"0",cellspacing:"0",style:{border:"none","border-collapse":"collapse","mso-table-lspace":"0pt","mso-table-rspace":"0pt"},width:"100%"},[e("tbody",null,[e("tr",null,[e("td",{height:"1",style:{"border-bottom":"8px solid #eeeeee","line-height":"1px"},width:"1"})]),e("tr",null,[e("td",{height:"1",style:{"line-height":"1px"},width:"1"})])])])])])])])])])])])])])])],-1),xe={border:"0",cellpadding:"0",cellspacing:"0",role:"presentation",style:{"vertical-align":"top"},width:"100%"},we={class:"pardot-region","pardot-region":"",style:{"font-size":"0px",padding:"0 36px 0 36px","word-break":"break-word"}},Te=["innerHTML"];function ke(r,o,c,t,s,d){const i=w("loadingSpinner"),l=w("Workspace");return p(),u(j,null,[h(x(i,null,null,512),[[v,t.isLoading]]),x(l,null,W({form:g(()=>[e("div",Q,[e("div",X,[e("h1",Y,[m("Table of contents"),e("span",Z,[m("A little experimental "),e("span",$,T(t.reaction),1)])])])]),t.haveToc?f("",!0):(p(),u("div",ee,[e("div",te,[e("div",oe,[ne,h(e("input",{class:"form-control",id:"urlToFetch","onUpdate:modelValue":o[0]||(o[0]=n=>t.urlToFetch=n)},null,512),[[k,t.urlToFetch]])]),e("div",se,[e("button",{class:"btn btn-sm btn-default pull-right",onClick:o[1]||(o[1]=(...n)=>t.handleSubmit&&t.handleSubmit(...n))},"Generate TOC")])])])),t.error!=""?(p(),u("div",le,[e("div",ae,[e("p",re,T(t.error),1)])])):f("",!0),h(e("div",ie,[e("div",ce,[e("div",de,[pe,h(e("textarea",{class:"form-control",id:"input","onUpdate:modelValue":o[2]||(o[2]=n=>t.input=n)},null,512),[[k,t.input]])])])],512),[[v,t.haveToc]]),t.haveToc?(p(),u("div",ue,[e("div",he,[e("div",me,[e("button",{class:"btn btn-default",id:"refresh",onClick:o[3]||(o[3]=(...n)=>t.reset&&t.reset(...n))},[be,m(" Reset")]),e("div",fe,[e("button",{class:"btn btn-primary",id:"copyHtml",onClick:o[4]||(o[4]=(...n)=>t.copy&&t.copy(...n)),"aria-label":"Copied HTML!"},[_e,m(" Copy HTML")])])])])])):f("",!0)]),_:2},[t.haveToc?{name:"render-container",fn:g(()=>[e("div",ge,[e("div",ye,[ve,e("table",xe,[e("tbody",null,[e("tr",null,[e("td",we,[e("div",{style:{"font-family":"Arial, Helvetica, sans-serif","font-size":"16px","font-weight":"normal","line-height":"24px","text-align":"left",color:"#2a2a2a"},innerHTML:t.output},null,8,Te)])])])])])])]),key:"0"}:void 0]),1024)],64)}const Fe={components:{Workspace:A,LoadingSpinner:K},setup(){const r=a(""),o=a(!1),c=a(!1),t=a(""),s=a(""),d=a("");let i=null;const l={testTube:"🧪",safetyGlasses:"🥽",happy:"🙂",nervous:"😬",sad:"🙁"},n=a(l.safetyGlasses),S="### In this issue",{renderer:H}=R();console.log("hiya"),_.use({renderer:H}),_.setOptions({gfm:!0,headerIds:!1});const L=D(()=>_(s.value));function M(){F(()=>{const b=document.getElementById("input");i=U(s,b,"250px")})}async function B(){o.value=!0,d.value="",l.value=n.nervous;const b="https://andthatproveswhat.com/roundupper-api/toc";try{const O=await(await fetch(b,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:r.value})})).text();s.value=`${S}
${JSON.parse(O).data.join(`
`)}`,F(()=>{i.setValue(s.value),i.focus(),i.setCursor({line:0,ch:0})}),c.value=!0,n.value=l.testTube}catch(y){console.error(y),n.value=l.sad,c.value=!1,d.value="Error fetching TOC"}finally{o.value=!1}}function N(){window.location.reload()}function V(){z()}return G(M),{urlToFetch:r,handleSubmit:B,isLoading:o,tocMarkdown:t,input:s,haveToc:c,output:L,reset:N,copy:V,error:d,reaction:n,reactions:l}}},Ve=C(Fe,[["render",ke]]);export{Ve as default};
